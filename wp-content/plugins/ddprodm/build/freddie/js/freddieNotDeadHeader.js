window.CanvasSlideshow=function(e){var t=this;(e=e||{}).stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1900,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:900,e.pixiSprites=e.hasOwnProperty("sprites")?e.sprites:[],e.centerSprites=!!e.hasOwnProperty("centerSprites")&&e.centerSprites,e.texts=e.hasOwnProperty("texts")?e.texts:[],e.autoPlay=!1,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:[10,3],e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.displaceScale=e.hasOwnProperty("displaceScale")?e.displaceScale:[200,70],e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.dotsControl=e.hasOwnProperty("dotsControl")?e.dotsControl:document.querySelectorAll(".frddie_all_dead_header_hero .et-pb-controllers a"),e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".scene-nav"),e.parentCanvas=e.hasOwnProperty("parent")?e.parentCanvas:document.querySelectorAll(".frddie_all_dead_header_hero"),e.displaceAutoFit=!!e.hasOwnProperty("displaceAutoFit")&&e.displaceAutoFit,e.wacky=!!e.hasOwnProperty("wacky")&&e.wacky,e.interactive=!!e.hasOwnProperty("interactive")&&e.interactive,e.interactionEvent=e.hasOwnProperty("interactionEvent")?e.interactionEvent:"",e.displaceScaleTo=!1===e.autoPlay?[0,0]:[20,20],e.textColor=e.hasOwnProperty("textColor")?e.textColor:"#fff",e.displacementCenter=!!e.hasOwnProperty("displacementCenter")&&e.displacementCenter,e.dispatchPointerOver=!!e.hasOwnProperty("dispatchPointerOver")&&e.dispatchPointerOver;var a=new PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),n=new PIXI.Container,r=new PIXI.Container,i=new PIXI.Sprite.fromImage(e.displacementImage),o=new PIXI.filters.DisplacementFilter(i),l=new PIXI.TextStyle({fill:e.textColor,wordWrap:!0,wordWrapWidth:400,letterSpacing:20,fontSize:14});this.currentIndex=0,this.initPixi=function(){e.parentCanvas[0].appendChild(a.view),n.addChild(r),n.interactive=!0,!0===e.fullScreen?(a.view.style.objectFit="cover",a.view.style.width="100%",a.view.style.height="100%",a.view.style.top="50%",a.view.style.left="50%",a.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",a.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(a.view.style.maxWidth="100%",a.view.style.top="50%",a.view.style.left="50%",a.view.style.webkitTransform="translate( -50%, -50% )",a.view.style.transform="translate( -50%, -50% )"),i.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,n.filters=[o],!0===e.wacky&&(i.anchor.set(.5),i.x=a.width/2,i.y=a.height/2),i.scale.x=2,i.scale.y=2,o.autoFit=e.displaceAutoFit,n.addChild(i)},this.loadPixiSprites=function(t){for(var n=e.sprites,i=e.texts,o=0;o<n.length;o++){var s=new PIXI.Texture.fromImage(t[o]),c=new PIXI.Sprite(s);if(i){var d=new PIXI.Text(i[o],l);c.addChild(d),d.anchor.set(.5),d.x=c.width/2,d.y=c.height/2}!0===e.centerSprites&&(c.anchor.set(.5),c.x=a.width/2,c.y=a.height/2),0!==o&&TweenMax.set(c,{alpha:0}),r.addChild(c)}};var s=new PIXI.ticker.Ticker;s.autoStart=!0,s.add(function(e){a.render(n)});var c=new PIXI.ticker.Ticker;c.autoStart=e.autoPlay,c.add(function(t){i.x+=e.autoPlaySpeed[0]*t,i.y+=e.autoPlaySpeed[1],a.render(n)});var d=r.children;this.moveSlider=function(r){e.autoPlay=!0;var l=new PIXI.ticker.Ticker;l.autoStart=e.autoPlay,l.add(function(t){i.x+=e.autoPlaySpeed[0]*t,i.y+=e.autoPlaySpeed[1],a.render(n)});var s=new TimelineMax({onComplete:function(){t.currentIndex=r,!0===e.wacky&&i.scale.set(1)},onUpdate:function(){!0===e.wacky&&(i.rotation+=.02*s.progress(),i.scale.set(3*s.progress()))}});s.clear(),s.isActive()||s.to(o.scale,1,{x:150,y:150}).to(d[t.currentIndex],.5,{alpha:0}).to(d[r],.5,{alpha:1}).to(o.scale,1,{x:0,y:0})};for(var p=e.navElement,h=0;h<p.length;h++)p[h].onclick=function(e){return"next"===this.getAttribute("data-nav")?t.currentIndex>=0&&t.currentIndex<d.length-1?t.moveSlider(t.currentIndex+1):t.moveSlider(0):t.currentIndex>0&&t.currentIndex<d.length?t.moveSlider(t.currentIndex-1):t.moveSlider(d.length-1),!1};var u,w,y,v=e.dotsControl;for(h=0;h<v.length;h++)v[h].onclick=function(e){return t.moveSlider(this.textContent-1),!1};function x(){i.rotation+=.001,u=requestAnimationFrame(x)}jQuery(".frddie_all_dead_header_hero .et_pb_slider").hasClass("et_slider_auto")&&setInterval(function(){if(!jQuery(".frddie_all_dead_header_hero .et_pb_slider .et-pb-controllers a.et-pb-active-control").hasClass("done")){var e=jQuery(".frddie_all_dead_header_hero .et_pb_slider .et_pb_slides .et_pb_slide.et-pb-active-slide").prevAll(".et_pb_slide").length;return t.moveSlider(e),!1}},100),this.init=function(){t.initPixi(),t.loadPixiSprites(e.pixiSprites)},!0===e.interactive&&(r.interactive=!0,r.buttonMode=!0,"hover"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerover=function(e){w=e.data.global.x,y=e.data.global.y,TweenMax.to(o.scale,1,{x:"+="+100*Math.sin(w),y:"+="+100*Math.cos(y)}),x()},r.pointerout=function(e){TweenMax.to(o.scale,1,{x:0,y:0}),cancelAnimationFrame(u)}),"click"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerup=function(t){!0===e.dispatchPointerOver?TweenMax.to(o.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(o.scale,1,{x:20,y:20})}}):(TweenMax.to(o.scale,1,{x:0,y:0}),cancelAnimationFrame(u))},r.pointerdown=function(e){w=e.data.global.x,y=e.data.global.y,TweenMax.to(o.scale,1,{x:"+="+1200*Math.sin(w),y:"+="+200*Math.cos(y)})},r.pointerout=function(t){!0===e.dispatchPointerOver?TweenMax.to(o.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(o.scale,1,{x:20,y:20})}}):(TweenMax.to(o.scale,1,{x:0,y:0}),cancelAnimationFrame(u))})),!0===e.displacementCenter&&(i.anchor.set(.5),i.x=a.view.width/2,i.y=a.view.height/2),this.init()};